import React, { useState } from 'react';

type Symptom = 'fever' | 'diarrhea' | 'respiratory' | 'chest' | 'mental' | 'child' | null;

// Fix: By explicitly typing symptomData, we inform TypeScript that properties on the 'details' object are optional.
// This resolves errors where properties like 'warning' or 'homeCare' were accessed on symptom types where they didn't exist.
const symptomData: {
    [key: string]: {
        title: string;
        description: string;
        details: {
            warning?: string;
            dangerSigns?: string[];
            homeCare?: string[];
            actionSteps?: string[];
        };
    };
} = {
    fever: {
        title: 'ЁЯФе ржЬрзНржмрж░',
        description: 'ржЬрзНржмрж░ ржПржмржВ рж╕ржВрж╢рзНрж▓рж┐рж╖рзНржЯ рж▓ржХрзНрж╖ржг',
        details: {
            dangerSigns: ['ржЬрзНржмрж░ рзй ржжрж┐ржирзЗрж░ ржмрзЗрж╢рж┐ рж╕рзНржерж╛ржпрж╝рзА рж╣рж▓рзЗ', 'рззрзжрзй┬░F (рзйрзп.рзк┬░C) ржПрж░ ржмрзЗрж╢рж┐ ржЬрзНржмрж░', 'ржЦрж┐ржБржЪрзБржирж┐ ржмрж╛ ржЕржЬрзНржЮрж╛ржи рж╣ржпрж╝рзЗ ржпрж╛ржУржпрж╝рж╛', 'ржЧрж▓рж╛ рж╢ржХрзНржд рж╣ржУржпрж╝рж╛ ржмрж╛ ржЖрж▓рзЛрждрзЗ ржЪрзЛржЦ ржмрзНржпржерж╛'],
            homeCare: ['ржкрзНрж░ржЪрзБрж░ ржкрж╛ржирж┐ ржУ рждрж░рж▓ ржкрж╛ржи ржХрж░рзБржи', 'ржкрж░рзНржпрж╛ржкрзНржд ржмрж┐рж╢рзНрж░рж╛ржо ржирж┐ржи', 'рж╣рж╛рж▓ржХрж╛ ржЧрж░ржо ржкрж╛ржирж┐рждрзЗ ржЧрж╛ ржорзБржЫрзБржи', 'рж╕рж╣ржЬрзЗ рж╣ржЬржо рж╣ржпрж╝ ржПржоржи ржЦрж╛ржмрж╛рж░ ржЦрж╛ржи']
        }
    },
    diarrhea: {
        title: 'ЁЯТй ржбрж╛ржпрж╝рж░рж┐ржпрж╝рж╛',
        description: 'ржбрж╛ржпрж╝рж░рж┐ржпрж╝рж╛ ржПржмржВ ржкрж╛ржирж┐рж╢рзВржирзНржпрждрж╛',
        details: {
            dangerSigns: ['рзй ржжрж┐ржирзЗрж░ ржмрзЗрж╢рж┐ ржбрж╛ржпрж╝рж░рж┐ржпрж╝рж╛', 'ржорж▓рзЗрж░ рж╕рж╛ржерзЗ рж░ржХрзНржд ржЧрзЗрж▓рзЗ', 'ржкрж╛ржирж┐рж╢рзВржирзНржпрждрж╛рж░ рж▓ржХрзНрж╖ржг (рж╢рзБрж╖рзНржХ ржорзБржЦ, ржЪрзЛржЦ ржЧрж░рзНрждрзЗ)', 'рждрзАржмрзНрж░ ржкрзЗржЯ ржмрзНржпржерж╛ ржмрж╛ ржЬрзНржмрж░'],
            actionSteps: ['ржУрж░рж╛рж▓ рж╕рзНржпрж╛рж▓рж╛ржЗржи ржкрж╛ржи ржХрж░рзБржи', 'ржкрж░рж┐рж╖рзНржХрж╛рж░ ржкрж╛ржирж┐ ржкрж╛ржи ржХрж░рзБржи', 'рж╣рж╛ржд ржнрж╛рж▓рзЛржнрж╛ржмрзЗ ржзрзБржпрж╝рзЗ ржирж┐ржи', 'ржмрж╛рж╕рж┐ ржЦрж╛ржмрж╛рж░ ржПржбрж╝рж┐ржпрж╝рзЗ ржЪрж▓рзБржи']
        }
    },
    respiratory: {
        title: 'ЁЯШотАНЁЯТи рж╢рзНржмрж╛рж╕ржХрж╖рзНржЯ',
        description: 'ржХрж╛рж╢рж┐, рж╕рж░рзНржжрж┐ ржПржмржВ рж╢рзНржмрж╛рж╕ржХрж╖рзНржЯ',
        details: {
            dangerSigns: ['ржирж┐рж╢рзНржмрж╛рж╕ ржирж┐рждрзЗ ржХрж╖рзНржЯ рж╣ржУржпрж╝рж╛', 'ржирзАрж▓ржЪрзЗ ржарзЛржБржЯ ржмрж╛ ржиржЦ', 'ржмрзБржХрзЗ рждрзАржмрзНрж░ ржмрзНржпржерж╛', 'ржЬрзНржмрж░рзЗрж░ рж╕рж╛ржерзЗ ржХрж╛рж╢рж┐'],
            homeCare: ['ржЧрж░ржо ржкрж╛ржирж┐рж░ ржнрж╛ржк ржирж┐ржи', 'ржЧрж░ржо ржкрж╛ржирж┐рждрзЗ рж▓рзЗржмрзБ ржУ ржоржзрзБ ржорж┐рж╢рж┐ржпрж╝рзЗ ржкрж╛ржи ржХрж░рзБржи', 'ржзрзБрж▓рж╛ржмрж╛рж▓рж┐ ржУ ржзрзЛржБржпрж╝рж╛ ржПржбрж╝рж┐ржпрж╝рзЗ ржЪрж▓рзБржи']
        }
    },
    chest: {
        title: 'тЭдя╕П ржмрзБржХрзЗ ржмрзНржпржерж╛',
        description: 'ржмрзБржХ, ржкрзЗржЯ ржмрж╛ ржкрзЗрж╢рзАрждрзЗ ржмрзНржпржерж╛',
        details: {
            warning: 'ржмрзБржХрзЗ ржмрзНржпржерж╛ ржЙржкрзЗржХрзНрж╖рж╛ ржХрж░ржмрзЗржи ржирж╛ред ржПржЯрж┐ рж╣рж╛рж░рзНржЯ ржЕрзНржпрж╛ржЯрж╛ржХрзЗрж░ рж▓ржХрзНрж╖ржг рж╣рждрзЗ ржкрж╛рж░рзЗред ржЕржмрж┐рж▓ржорзНржмрзЗ рж╣рж╛рж╕ржкрж╛рждрж╛рж▓рзЗ ржпрж╛ржиред',
            dangerSigns: ['ржмрзБржХрзЗ ржЪрж╛ржк, ржнрж░ ржмрж╛ ржмрзНржпржерж╛', 'ржмрзНржпржерж╛ ржмрж╛рж╣рзБ, ржШрж╛ржбрж╝, ржЪрзЛржпрж╝рж╛рж▓ ржмрж╛ ржкрж┐ржарзЗ ржЫржбрж╝рж╛ржирзЛ', 'рж╢рзНржмрж╛рж╕ржХрж╖рзНржЯ', 'ржарж╛ржирзНржбрж╛ ржШрж╛ржо']
        }
    },
    mental: {
        title: 'ЁЯза ржорж╛ржирж╕рж┐ржХ рж╕рзНржмрж╛рж╕рзНржерзНржп',
        description: 'ржорж╛ржирж╕рж┐ржХ ржЪрж╛ржк ржПржмржВ ржЙржжрзНржмрзЗржЧ',
        details: {
            dangerSigns: ['рзи рж╕ржкрзНрждрж╛рж╣рзЗрж░ ржмрзЗрж╢рж┐ ржоржи ржЦрж╛рж░рж╛ржк', 'ржХрзЛржирзЛ ржХрж┐ржЫрзБ ржЙржкржнрзЛржЧ ржХрж░рждрзЗ ржирж╛ ржкрж╛рж░рж╛', 'ржШрзБржо ржмрж╛ ржЦрж╛ржмрж╛рж░рзЗрж░ ржЕржнрзНржпрж╛рж╕рзЗ ржмржбрж╝ ржкрж░рж┐ржмрж░рзНрждржи', 'ржирж┐ржЬрзЗржХрзЗ ржмрж╛ ржЕржирзНржпржХрзЗ ржХрзНрж╖рждрж┐ ржХрж░рж╛рж░ ржЪрж┐ржирзНрждрж╛'],
            actionSteps: ['ржХрж╛ржЙржХрзЗ ржмрж▓рзБржи - ржмржирзНржзрзБ, ржкрж░рж┐ржмрж╛рж░ ржмрж╛ рж╣рзЗрж▓рзНржкрж▓рж╛ржЗржи', 'ржирж┐ржпрж╝ржорж┐ржд рж╣рж╛рж▓ржХрж╛ ржмрзНржпрж╛ржпрж╝рж╛ржо ржХрж░рзБржи', 'ржкрж░рзНржпрж╛ржкрзНржд ржШрзБржорж╛ржи', 'рж╕рзБрж╖ржо ржЦрж╛ржмрж╛рж░ ржЦрж╛ржи']
        }
    },
    child: {
        title: 'ЁЯС╢ рж╢рж┐рж╢рзБржжрзЗрж░ рж▓ржХрзНрж╖ржг',
        description: 'рж╢рж┐рж╢рзБржжрзЗрж░ ржмрж┐рж╢рзЗрж╖ рж▓ржХрзНрж╖ржг',
        details: {
            dangerSigns: ['ржЬрзНржмрж░ рззрзжрзж.рзк┬░F (рзйрзо┬░C) ржПрж░ ржмрзЗрж╢рж┐ (рзй ржорж╛рж╕рзЗрж░ ржХржо)', 'ржЦрж┐ржБржЪрзБржирж┐', 'ржХрж╛ржирзНржирж╛ ржмржирзНржз ржирж╛ ржХрж░рж╛', 'ржЦрж╛ржУржпрж╝рж╛-ржжрж╛ржУржпрж╝рж╛ ржмржирзНржз ржХрж░рж╛', 'рж╢рзНржмрж╛рж╕ржХрж╖рзНржЯ ржмрж╛ ржжрзНрж░рзБржд рж╢рзНржмрж╛рж╕', 'ржирзАрж▓ржЪрзЗ ржарзЛржБржЯ ржмрж╛ ржорзБржЦ'],
            actionSteps: ['ржирж┐ржпрж╝ржорж┐ржд ржЯрж┐ржХрж╛ ржжрж┐ржи', 'ржкрж░рж┐рж╖рзНржХрж╛рж░-ржкрж░рж┐ржЪрзНржЫржирзНржирждрж╛ ржмржЬрж╛ржпрж╝ рж░рж╛ржЦрзБржи', 'рж╕рзБрж╖ржо ржЦрж╛ржмрж╛рж░ ржжрж┐ржи', 'ржкрж░рзНржпрж╛ржкрзНржд рждрж░рж▓ ржкрж╛ржи ржХрж░рж╛ржи']
        }
    },
};

const SymptomGuide: React.FC = () => {
    const [activeSymptom, setActiveSymptom] = useState<Symptom>(null);

    const toggleSymptom = (symptom: Symptom) => {
        setActiveSymptom(activeSymptom === symptom ? null : symptom);
    };

    return (
        <section id="symptoms" className="bg-white p-6 md:p-8 rounded-lg shadow-md my-6">
            <h2 className="text-3xl font-bold text-emerald-800 mb-2">рж▓ржХрзНрж╖ржг рж╕ржЪрзЗрждржирждрж╛ ржЧрж╛ржЗржб</h2>
             <div className="bg-emerald-50 border-l-4 border-emerald-500 text-emerald-800 p-4 my-6 italic rounded-r-lg">
                <p>"рж╣рж╛ржмрж▓рзБрж░ ржжрзБржГрж╕рзНржмржкрзНржи: ржУржпрж╝рзЗржмржПржоржбрж┐ ржмрж╛ржВрж▓рж╛ржжрзЗрж╢ рж╕ржВрж╕рзНржХрж░ржг рж╣ржпрж╝рзЗ ржУржарж╛ред рждрж╛рж░ рж╕ржмржЪрзЗржпрж╝рзЗ ржХржо ржкрзНрж░ржпрж╝рзЛржЬржи рж╣рж▓рзЛ ржорж╛ржирзБрж╖ ржпрзЗржи ржЕрзНржпрж╛ржк ржерзЗржХрзЗ рж╕рзНржм-ржирж┐рж░рзНржгржпрж╝ ржирж╛ ржХрж░рзЗред ржПржЯрж┐ 'рж▓ржХрзНрж╖ржг рж▓рж┐ржЦрзБржи тЖТ рж░рзЛржЧ ржирж┐рж░рзНржгржпрж╝ ржкрж╛ржи' ржиржпрж╝ред ржПржЯрж┐ 'ржмрж┐ржкржж рж╕ржВржХрзЗржд рж╕ржорзНржкрж░рзНржХрзЗ рж╢рж┐ржХрзНрж╖рж╛ ржжрж┐ржи'ред"</p>
            </div>
             <div className="bg-red-100 border-l-4 border-red-500 text-red-800 p-4 mb-6 rounded-r-lg">
                <h4 className="font-bold">тЪая╕П ржЧрзБрж░рзБрждрзНржмржкрзВрж░рзНржг ржирзЛржЯ</h4>
                <p>ржПржЗ ржЧрж╛ржЗржб рж╢рзБржзрзБржорж╛рждрзНрж░ рж╢рж┐ржХрзНрж╖рж╛ржорзВрж▓ржХ ржЙржжрзНржжрзЗрж╢рзНржпрзЗред ржПржЯрж┐ ржЪрж┐ржХрж┐рзОрж╕рж╛ ржкрж░рж╛ржорж░рзНрж╢ ржмрж╛ рж░рзЛржЧ ржирж┐рж░рзНржгржпрж╝рзЗрж░ ржмрж┐ржХрж▓рзНржк ржиржпрж╝ред ржЧрзБрж░рзБрждрж░ рж▓ржХрзНрж╖ржг ржжрзЗржЦрж╛ ржжрж┐рж▓рзЗ ржЕржмрж╢рзНржпржЗ ржбрж╛ржХрзНрждрж╛рж░рзЗрж░ ржкрж░рж╛ржорж░рзНрж╢ ржирж┐ржиред</p>
            </div>
            <div className="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4">
                {Object.entries(symptomData).map(([key, value]) => (
                    <div key={key} onClick={() => toggleSymptom(key as Symptom)} className="bg-emerald-50 p-4 rounded-lg cursor-pointer hover:bg-emerald-100 transition-colors">
                        <h4 className="text-lg font-bold text-emerald-800">{value.title}</h4>
                        <p className="text-gray-600 text-sm">{value.description}</p>
                    </div>
                ))}
            </div>
            {activeSymptom && symptomData[activeSymptom]?.details && (
                <div className="mt-6 bg-gray-50 p-6 rounded-lg animate-fade-in">
                    <h3 className="text-xl font-bold text-emerald-800 mb-4">{symptomData[activeSymptom].title} рж╕ржорзНржкрж░рзНржХрзЗ ржмрж┐рж╕рзНрждрж╛рж░рж┐ржд</h3>
                    {symptomData[activeSymptom].details.warning && (
                         <div className="bg-red-100 border-l-4 border-red-500 text-red-800 p-4 mb-4 rounded-r-lg">
                            <h4 className="font-bold">тЪая╕П рж╕рждрж░рзНржХрждрж╛</h4>
                            <p>{symptomData[activeSymptom].details.warning}</p>
                        </div>
                    )}
                    {symptomData[activeSymptom].details.dangerSigns && (
                        <div className="bg-amber-100 border-l-4 border-amber-500 text-amber-900 p-4 mb-4 rounded-r-lg">
                            <h4 className="font-bold">ЁЯЪи ржмрж┐ржкржж рж╕ржВржХрзЗржд (ржбрж╛ржХрзНрждрж╛рж░ ржжрзЗржЦрж╛ржи)</h4>
                            <ul className="list-disc list-inside mt-2">{symptomData[activeSymptom].details.dangerSigns?.map(item => <li key={item}>{item}</li>)}</ul>
                        </div>
                    )}
                     {symptomData[activeSymptom].details.actionSteps && (
                        <div className="bg-blue-100 border-l-4 border-blue-500 text-blue-800 p-4 mb-4 rounded-r-lg">
                            <h4 className="font-bold">тЬЕ ржХрж░ржгрзАржпрж╝</h4>
                            <ul className="list-disc list-inside mt-2">{symptomData[activeSymptom].details.actionSteps?.map(item => <li key={item}>{item}</li>)}</ul>
                        </div>
                    )}
                    {symptomData[activeSymptom].details.homeCare && (
                         <div className="bg-green-100 border-l-4 border-green-500 text-green-800 p-4 rounded-r-lg">
                            <h4 className="font-bold">ЁЯПа ржШрж░рзЛржпрж╝рж╛ ржпрждрзНржи</h4>
                            <ul className="list-disc list-inside mt-2">{symptomData[activeSymptom].details.homeCare?.map(item => <li key={item}>{item}</li>)}</ul>
                        </div>
                    )}
                </div>
            )}
        </section>
    );
};

export default SymptomGuide;